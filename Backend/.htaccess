Options -MultiViews
RewriteEngine On
RewriteBase /

# API routes → PHP router
# Redirect /api/* to public/index.php and preserve the full path
RewriteRule ^api/(.*)$ public/index.php [QSA,L]

# Serve existing files and directories
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Try .html extension for Next.js static export
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L]

# Try index.html in directory
RewriteCond %{REQUEST_FILENAME}/index.html -f
RewriteRule ^(.+)$ $1/index.html [L]

# Configuración de seguridad
<Files "config.env">
    Order allow,deny
    Deny from all
</Files>

<Files "config.production.env">
    Order allow,deny
    Deny from all
</Files>

# Headers de seguridad
Header always set X-Content-Type-Options nosniff
Header always set X-Frame-Options DENY
Header always set X-XSS-Protection "1; mode=block"

# Configuración de PHP
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_execution_time 300
php_value memory_limit 256M
